<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LED Control</title>
</head>
<body>
  <h1>LED Control Panel</h1>

  <div>
    <label for="led1">LED 1 Intensity (0-255):</label>
    <input type="range" id="led1" min="0" max="255" value="0" oninput="sendCommand('LED1', this.value)">
  </div>
  
  <div>
    <label for="led2">LED 2 Intensity (0-255):</label>
    <input type="range" id="led2" min="0" max="255" value="0" oninput="sendCommand('LED2', this.value)">
  </div>

  <div>
    <label for="led3">LED 3 Intensity (0-255):</label>
    <input type="range" id="led3" min="0" max="255" value="0" oninput="sendCommand('LED3', this.value)">
  </div>

  <button onclick="connectToArduino()">Connect to Arduino</button>

  <script>
    let port;

    async function connectToArduino() {
      try {
        // Request a port and open a connection.
        port = await navigator.serial.requestPort();
        await port.open({ baudRate: 9600 });
        console.log("Connected to Arduino!");
      } catch (error) {
        console.error("Error connecting to Arduino: ", error);
      }
    }

    async function sendCommand(led, value) {
      if (port) {
        const writer = port.writable.getWriter();
        let command = `${led}:${value}\n`;
        const data = new TextEncoder().encode(command);
        await writer.write(data);
        writer.releaseLock();
      } else {
        console.log("Port is not connected.");
      }
    }
  </script>
</body>
</html>
